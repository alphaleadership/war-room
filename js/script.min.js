document.addEventListener("DOMContentLoaded",function(){if(document.getElementById("map")&&typeof conflicts!=="undefined"&&conflicts.length>0){const mapConfig=themeConfig.map||{};const zoom=mapConfig.zoom||2;const center=mapConfig.center||[0,0];const tileProvider=mapConfig.tile_provider||"osm";const mapboxToken=mapConfig.mapbox_token;const esriToken=mapConfig.esri_token;let tileUrl;switch(tileProvider){case"mapbox":tileUrl=`https://api.mapbox.com/styles/v1/{id}/tiles/{z}/{x}/{y}?access_token=${mapboxToken}`;break;case"esri":tileUrl=`https://server.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer/tile/{z}/{y}/{x}?token=${esriToken}`;break;default:tileUrl="https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png"}var map=L.map("map").setView(center,zoom);L.tileLayer(tileUrl,{attribution:'&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors'}).on("tileerror",function(error,tile){console.error("Tile loading error:",error)}).addTo(map);const conflictMarkers=new ConflictMarkers(map);conflicts.forEach(conflict=>{conflictMarkers.addMarker(conflict)})}if(document.getElementById("news-banner")&&typeof newsItems!=="undefined"&&newsItems.length>0){const newsBannerConfig=themeConfig.news_banner||{};if(newsBannerConfig.enable){new NewsBanner("news-banner",newsItems,newsBannerConfig)}}});